<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Magnet Strength Meter</title>
<style>
body {
    background: #0f172a;
    color: white;
    font-family: Arial;
    text-align: center;
    margin-top: 40px;
}
h1 { margin-bottom: 10px; }
#values { font-size: 18px; margin: 10px 0; }
#strength { font-size: 28px; margin: 20px 0; }

.bar-container {
    width: 85%;
    height: 25px;
    background: #1e293b;
    margin: auto;
    border-radius: 20px;
    overflow: hidden;
}

.bar {
    height: 100%;
    width: 0%;
    background: lime;
    transition: width 0.1s;
}

button {
    padding: 12px 25px;
    margin-top: 20px;
    font-size: 16px;
    border: none;
    border-radius: 8px;
    background: #2563eb;
    color: white;
}
</style>
</head>
<body>

<h1>ðŸ§² Magnet Strength Meter</h1>

<div id="strength">Press Start</div>
<div id="values"></div>

<div class="bar-container">
    <div class="bar" id="bar"></div>
</div>

<button onclick="startSensor()">Start</button>

<script>
let sensor;

function startSensor() {

    if ('Magnetometer' in window) {

        try {
            sensor = new Magnetometer({frequency: 60});

            sensor.addEventListener('reading', () => {

                let x = sensor.x;
                let y = sensor.y;
                let z = sensor.z;

                let total = Math.sqrt(x*x + y*y + z*z);

                document.getElementById("values").innerText =
                    "X: " + x.toFixed(2) +
                    "  Y: " + y.toFixed(2) +
                    "  Z: " + z.toFixed(2);

                document.getElementById("strength").innerText =
                    total.toFixed(2) + " ÂµT";

                let percent = Math.min((total / 200) * 100, 100);
                let bar = document.getElementById("bar");
                bar.style.width = percent + "%";

                if (total < 70) {
                    bar.style.background = "lime";
                } else if (total < 150) {
                    bar.style.background = "orange";
                } else {
                    bar.style.background = "red";
                }

            });

            sensor.start();

        } catch (error) {
            alert("Sensor error: " + error);
        }

    } else {
        alert("Magnetometer not supported.\n\nMake sure:\n- You're using HTTPS\n- You're using Chrome\n- Sensors are enabled in Chrome settings");
    }
}
</script>

</body>
</html>
